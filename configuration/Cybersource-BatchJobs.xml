<?xml version="1.0" encoding="UTF-8"?>
<jobs xmlns="http://www.demandware.com/xml/impex/jobs/2015-07-01">
    <job job-id="APCheckStatusJob" priority="0">
        <description>Job Scheduler to check the status of Ali Pay Initiate Payment request status.</description>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="SiteGenesis"/>
                <template-ref template-id="template_23"/>
            </flow>
            <flow>
                <context site-id="SiteGenesisGlobal"/>
                <template-ref template-id="template_23"/>
            </flow>
            <flow-template template-id="template_23">
                <step step-id="APCheckStatusJob" type="ExecuteScriptModule" enforce-restart="false">
                    <description>Check payment status for APM's</description>
                    <parameters>
                        <parameter name="ExecuteScriptModule.Module">int_cybersource/cartridge/scripts/jobs/APCheckStatusJob.js</parameter>
                        <parameter name="ExecuteScriptModule.FunctionName">checkPaymentStatusJob</parameter>
                        <parameter name="ExecuteScriptModule.Transactional">false</parameter>
                        <parameter name="LagTime">0</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <rules>
            <on-running runtime-threshold="60m" enabled="false">
                <mark-job-as-hanging/>
                <send-mail>
                    <from>demo@sapient.com</from>
                    <to>demo@sapient.com</to>
                </send-mail>
            </on-running>
            <on-retry enabled="false">
                <send-mail>
                    <from>demo@sapient.com</from>
                    <to>demo@sapient.com</to>
                </send-mail>
            </on-retry>
            <on-exit status="ERROR" enabled="false">
                <send-mail>
                    <from>demo@sapient.com</from>
                    <to>demo@sapient.com</to>
                </send-mail>
            </on-exit>
        </rules>
        <triggers>
            <run-once enabled="true">
                <date>2016-12-29Z</date>
                <time>21:43:11.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="CyberSourceConversionReportJob" priority="0">
        <description>CyberSource conversion detail report</description>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="SiteGenesis"/>
                <template-ref template-id="template_91"/>
            </flow>
            <flow>
                <context site-id="SiteGenesisGlobal"/>
                <template-ref template-id="template_91"/>
            </flow>
            <flow-template template-id="template_91">
                <step step-id="ConversionDetailReportJob" type="ExecuteScriptModule" enforce-restart="false">
                    <description>Update order status which are in REVIEW/REJECT state</description>
                    <parameters>
                        <parameter name="ExecuteScriptModule.Module">int_cybersource/cartridge/scripts/jobs/ConversionDetailReportJob.js</parameter>
                        <parameter name="ExecuteScriptModule.FunctionName">conversionDetailReport</parameter>
                        <parameter name="ExecuteScriptModule.Transactional">false</parameter>
                        <parameter name="merchantId">sapient_nitro</parameter>
                        <parameter name="username">anujjain</parameter>
                        <parameter name="password">Sapient345$</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-once enabled="true">
                <date>2016-12-29Z</date>
                <time>11:30:03.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="SecureAcceptanceMerchantPostJob" priority="0">
        <description>Secure Acceptance Merhcant Post Notification Job</description>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="SiteGenesis"/>
                <template-ref template-id="template_43"/>
            </flow>
            <flow>
                <context site-id="SiteGenesisGlobal"/>
                <template-ref template-id="template_43"/>
            </flow>
            <flow-template template-id="template_43">
                <step step-id="SAMerchantPostJob" type="ExecuteScriptModule" enforce-restart="false">
                    <description>To handle failed order</description>
                    <parameters>
                        <parameter name="ExecuteScriptModule.Module">int_cybersource/cartridge/scripts/jobs/SAMerchantPostJob.js</parameter>
                        <parameter name="ExecuteScriptModule.FunctionName">sAMerchantPostJob</parameter>
                        <parameter name="ExecuteScriptModule.Transactional">false</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-once enabled="true">
                <date>2016-12-29Z</date>
                <time>11:40:27.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="iDealBankOptionJob" priority="0">
        <description>To the supported list of baks for iDeal bank transfer</description>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="SiteGenesis"/>
                <template-ref template-id="template_55"/>
            </flow>
            <flow>
                <context site-id="SiteGenesisGlobal"/>
                <template-ref template-id="template_55"/>
            </flow>
            <flow-template template-id="template_55">
                <step step-id="call-cyb-option-service" type="ExecuteScriptModule" enforce-restart="false">
                    <description>To get the supported bank list for iDeal payment method.</description>
                    <parameters>
                        <parameter name="ExecuteScriptModule.Module">int_cybersource/cartridge/scripts/jobs/iDealBankOptionJob.js</parameter>
                        <parameter name="ExecuteScriptModule.FunctionName">run</parameter>
                        <parameter name="ExecuteScriptModule.Transactional">true</parameter>
                        <parameter name="merchantId">sapient_nitro_1</parameter>
                        <parameter name="merchantKey">0cjh7aTtZ9wb9y2m2cEFEWacvokaJBMWyEBaQ6qfUaxX4QNY5MRKoZgs5DtjV2jwaoJqtxi7Jj0g4ig1jj9RwKXedzu9U5xycGY9mOI5CRU9xjebNFWUf9qkVfpjrSZ9U5vU8L/i6ZDJn1HeO7j8mkV3OcJjnHh5zHPDS2FfBVVjcRufEgwoJqYjNHiA7tlr7AyCfJAp868YowFQpa11xHZGuF/Qi3M4CSUpK7eBiyzcSqyKIJsIz8uZp/QZDTFso3TK/a/t1xPvUd4WQ4gcOlrrTvlVsmCMmnQKGDI9ONzVxFe4PCwFphsOtrpkS+KbM+FVmW1iFXy4tqqD9uJ8Sw==</parameter>
                        <parameter name="paymentType">IDL</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-once enabled="true">
                <date>2017-07-17Z</date>
                <time>10:20:57.000Z</time>
            </run-once>
        </triggers>
    </job>

</jobs>
