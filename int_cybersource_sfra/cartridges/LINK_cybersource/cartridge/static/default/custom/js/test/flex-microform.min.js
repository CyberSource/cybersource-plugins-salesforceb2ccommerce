/*! Copyright (c) 2016-2017 by CyberSource */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var s=n[r]={exports:{},id:r,loaded:!1};return e[r].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var s=n(17),o=r(s),i=n(3),u=r(i);t.default={FLEX:{microform:o.default,version:u.default}},e.exports=t.default},function(e,t){"use strict";function n(e){return null!=e&&"object"===("undefined"==typeof e?"undefined":p(e))}function r(e){var t="undefined"==typeof e?"undefined":p(e);return null!=e&&("object"===t||"function"===t)}function s(e){var t=r(e)?Object.prototype.toString.call(e):"";return"[object Function]"===t||"[object GeneratorFunction]"===t}function o(e){return"string"==typeof e||!Array.isArray(e)&&n(e)&&"[object String]"===Object.prototype.toString.call(e)}function i(e){return"object"===("undefined"==typeof HTMLElement?"undefined":p(HTMLElement))?e instanceof HTMLElement:e&&"object"===("undefined"==typeof e?"undefined":p(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function u(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function a(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,s=e.length;r<s;r+=1)n[r]=e.charCodeAt(r);return t}function l(){window.getSelection&&window.getSelection().empty?window.getSelection().empty():window.getSelection&&window.getSelection().removeAllRanges?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function c(e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+t.hostname+(t.port.length?":"+t.port:"")}function f(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}function d(e){return JSON.parse(JSON.stringify(e))}t.__esModule=!0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isObjectLike=n,t.isObject=r,t.isFunction=s,t.isString=o,t.isElement=i,t.arrayBufferToString=u,t.stringToArrayBuffer=a,t.clearCurrentSelection=l,t.resolveOrigin=c,t.uuid=f,t.simpleClone=d;t.Base64={encode:function(e){var t=o(e)?a(e):e;if("ArrayBuffer"==typeof t||t instanceof ArrayBuffer){var n=new Uint8Array(t);return window.btoa(String.fromCharCode.apply(null,n))}throw new TypeError("Input should be of type String or ArrayBuffer")}}},function(e,t){"use strict";t.__esModule=!0;var n=(t.encryptionTypes=["rsaoaep256","rsaoaep","none"],t.inputTypes=["tel","text","number","password"],t.cssClasses={FOCUSED:"flex-microform-focused",VALID:"flex-microform-valid",INVALID:"flex-microform-invalid",DISABLED:"flex-microform-disabled"},t.jsEvents={ENABLE:"enabled",DISABLE:"disabled",FOCUS:"focus",BLUR:"blur",EMPTY:"empty",NOT_EMPTY:"notEmpty",CARD_TYPE_CHANGE:"cardTypeChange",VALIDATION_CHANGE:"validationChange",INPUT_SUBMIT_REQUEST:"inputSubmitRequest",TOKENIZE_LOAD_START:"tokenizeLoadStart"});t.jsEventsList=Object.keys(n).map(function(e){return n[e]}),t.postMessagesFromParent={FOCUS:"focus",TOKENIZE:"tokenize",CLEAR:"clear",ENABLE:"enable",DISABLE:"disable",SET_PLACEHOLDER:"setPlaceholder"},t.postMessagesFromChild={FOCUS:"focus",BLUR:"blur",EMPTY:"empty",NOT_EMPTY:"notEmpty",CARD_CHANGE_TYPE:"cardTypeChange",VALIDATION_CHANGE:"cardValidationChange",ENABLE:"enable",DISABLE:"disable",INPUT_SUBMIT_REQUEST:"inputSubmitRequest",TOKENIZE_LOAD_START:"tokenizeLoadStart",HANDSHAKE_INIT:"handshakeInit",HANDSHAKE_COMPLETE:"handshakeComplete"}},function(e,t,n){"use strict";t.__esModule=!0,t.default="0.2.0",e.exports=t.default},function(e,t){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.message)throw new Error("Error message required");this.name="MicroformError",this.message=e.message,this.details=e.details}t.__esModule=!0,n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,t.default=n,e.exports=t.default},function(e,t,n){"use strict";function r(e){function t(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return!!(0,s.isString)(e)&&(!!(0,s.isFunction)(t)&&(E[n]||(E[n]={}),E[n][e]||(E[n][e]=[]),E[n][e].push(t),!0))}function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;if(E[n]&&E[n][e])return!1;var r=E[n][e];if(!r)return!1;for(var s=0;s<r.length;s+=1)if(r[s]===t)return r.splice(s,1),!0;return!1}function r(e){var r=(0,s.uuid)(),o=function t(s){n(r,t),e(s)};return t(r,o),r}function i(e,t,n){var s={event:e,contentType:o,sender:y,data:t||{}};return"function"==typeof n&&(s.reply=r(n)),s}function u(e){return function(t,n){var r=i(e.data.reply,t,n);e.source.postMessage(r,e.origin)}}function a(e,t,n,r){if(E[e]&&E[e][t])for(var s=E[e][t].length,o=0;o<s;o+=1)E[e][t][o].apply(r,n)}function l(e){var t=e.origin||e.originalEvent.origin;if((0,s.isObject)(e.data)&&e.data.contentType===o&&"event"in e.data&&!(!o.indexOf(e.data.event)<0)){var n=[e.data.data||{}];e.data.reply&&n.push(u(e)),a("*",e.data.event,n,e),a(t,e.data.event,n,e)}}function c(){window.removeEventListener("message",l,!1)}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v,s=i(e,t,n);try{m.postMessage(s,r)}catch(e){console.warn("Could not post payload\n\n"+s+"\n\nto origin: "+r),console.warn(e)}}function d(){return E={},!0}function p(){c(),d()}var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",E={},y=(0,s.uuid)(),m=e,v=b,g=h;return window.addEventListener("message",l,!1),{publish:f,subscribe:t,unsubscribe:n,unsubscribeAll:d,teardown:p}}t.__esModule=!0,t.default=r;var s=n(1),o="application/x-telegram+json";e.exports=t.default},function(e,t){"use strict";function n(e){return/^(01|02|03|04).{30}$/.test(e)}t.__esModule=!0,t.default=n,e.exports=t.default},,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){e.subscribe(l.jsEvents.FOCUS,function(){(0,a.clearCurrentSelection)(),t.classList.add(l.cssClasses.FOCUSED)}).subscribe(l.jsEvents.BLUR,function(){t.classList.remove(l.cssClasses.FOCUSED),document.activeElement===n&&console.log("Shift + TAB is currently unhandled in this browser.")}).subscribe(l.jsEvents.ENABLE,function(){t.classList.remove(l.cssClasses.DISABLED)}).subscribe(l.jsEvents.DISABLE,function(){t.classList.add(l.cssClasses.DISABLED)}).subscribe(l.jsEvents.VALIDATION_CHANGE,function(e){e.valid?(t.classList.remove(l.cssClasses.INVALID),t.classList.add(l.cssClasses.VALID)):e.couldBeValid?(t.classList.remove(l.cssClasses.VALID),t.classList.remove(l.cssClasses.INVALID)):(t.classList.remove(l.cssClasses.VALID),t.classList.add(l.cssClasses.INVALID))}).subscribe(l.jsEvents.DISABLE,function(){t.classList.add(l.cssClasses.DISABLED)})}function i(e,t){e.subscribe(l.postMessagesFromChild.FOCUS,function(){t.publish(l.jsEvents.FOCUS)}),e.subscribe(l.postMessagesFromChild.BLUR,function(){t.publish(l.jsEvents.BLUR)}),e.subscribe(l.postMessagesFromChild.ENABLE,function(){t.publish(l.jsEvents.ENABLE)}),e.subscribe(l.postMessagesFromChild.DISABLE,function(){t.publish(l.jsEvents.DISABLE)}),e.subscribe(l.postMessagesFromChild.EMPTY,function(){t.publish(l.jsEvents.EMPTY)}),e.subscribe(l.postMessagesFromChild.NOT_EMPTY,function(){t.publish(l.jsEvents.NOT_EMPTY)}),e.subscribe(l.postMessagesFromChild.CARD_CHANGE_TYPE,function(e){t.publish(l.jsEvents.CARD_TYPE_CHANGE,e)}),e.subscribe(l.postMessagesFromChild.VALIDATION_CHANGE,function(e){t.publish(l.jsEvents.VALIDATION_CHANGE,e)}),e.subscribe(l.postMessagesFromChild.INPUT_SUBMIT_REQUEST,function(){t.publish(l.jsEvents.INPUT_SUBMIT_REQUEST)}),e.subscribe(l.postMessagesFromChild.TOKENIZE_LOAD_START,function(){t.publish(l.jsEvents.TOKENIZE_LOAD_START)})}t.__esModule=!0,t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),l=n(2),c=n(3),f=r(c),d=n(13),p=r(d),b=n(4),h=r(b),E=function(e){return document.querySelectorAll(e)},y=function(e,t){for(var n=E(e),r=0;r<n.length;r+=1)n[r].addEventListener("click",t)},m=function(e,t){for(var n=E(e),r=0;r<n.length;r+=1)n[r].removeEventListener("click",t)},v=function(){function e(t,n,r,u){var a=this;s(this,e),this.container=t,this.telegram=u,this.pubSub=new p.default,o(this.pubSub,this.container),i(this.telegram,this.pubSub),r&&(this.labelSelector=r,this.labelClickHandler=function(e){e.preventDefault(),a.telegram.publish(l.postMessagesFromParent.FOCUS)},y(this.labelSelector,this.labelClickHandler))}return e.prototype.clear=function(){return this.telegram.publish(l.postMessagesFromParent.CLEAR),this},e.prototype.enable=function(){return this.telegram.publish(l.postMessagesFromParent.ENABLE),this},e.prototype.disable=function(){return this.telegram.publish(l.postMessagesFromParent.DISABLE),this},e.prototype.setPlaceholder=function(e){return this.telegram.publish(l.postMessagesFromParent.SET_PLACEHOLDER,{text:e||""}),this},e.prototype.on=function(e,t){if(!(l.jsEventsList.indexOf(e)>=0))throw new h.default({message:"Unsupported event type",details:{event:e}});return this.pubSub.subscribe(e,t),this},e.prototype.off=function(e,t){return this.pubSub.unsubscribe(e,t),this},e.prototype.createToken=function(e,t){if(!(0,a.isFunction)(t))throw new h.default({message:"A response handler has not been supplied"});var n=["cardType","cardExpirationMonth","cardExpirationYear"],r=Object.keys(e).reduce(function(t,r){var s;return n.indexOf(r)>-1&&Object.assign(t,(s={},s[r]=e[r],s)),t},{}),s=function(e){e.error?t(new h.default({message:"Tokens response error",details:e.error})):t(null,e)};this.telegram.publish(l.postMessagesFromParent.TOKENIZE,r,s)},e.prototype.teardown=function(e){this.container.innerHTML="",this.telegram.teardown(),this.pubSub.unsubscribeAll(),this.labelSelector&&m(this.labelSelector,this.labelClickHandler),this.telegram=null,this.pubSub=null,e&&e()},u(e,null,[{key:"version",get:function(){return f.default}}]),e}();t.default=v,e.exports=t.default},,function(e,t,n){"use strict";function r(){var e={};return s.jsEventsList.forEach(function(t){e[t]=[]}),{subscribe:function(t,n){if(!(0,o.isFunction)(n))throw new Error("handler not a function.");return s.jsEventsList.indexOf(t)<0?(console.warn("Unsupported event < "+t+" >"),this):(e[t].push(n),this)},unsubscribe:function(t,n){if(!(0,o.isFunction)(n))throw new Error("handler not a function.");var r=e[t].indexOf(n);return~r&&e[t].splice(r,1),this},unsubscribeAll:function(){return e={},this},publish:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.jsEventsList.indexOf(t)<0?(console.warn("Unsupported event < "+t+" >"),this):(e.hasOwnProperty.call(e,t)&&e[t].forEach(function(e){e(n)}),this)}}}t.__esModule=!0,t.default=r;var s=n(2),o=n(1);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.iframe=void 0;var s=n(3),o=r(s),i="cybersource/assets/microform/"+o.default+"/iframe.html",u=t.iframe={cas:"https://testflex.cybersource.com/"+i,prod:"https://flex.cybersource.com/"+i};t.default=u},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=document.createElement("iframe");return n.setAttribute("hspace","0"),n.setAttribute("vspace","0"),n.setAttribute("frameborder","0"),n.setAttribute("scrolling","no"),n.setAttribute("allowtransparency","true"),n.setAttribute("marginwidth","0"),n.setAttribute("marginheight","0"),n.style.overflow="hidden",n.style.position="relative",n.style.border="none",n.style.width="100%",n.style.height="100%",n.id="flex-microform-"+t,n.setAttribute("src",e+"?keyId="+t),n.innerHTML="<p>Your browser does not support frames.</p>",n}function o(e,t,n,r){e.innerHTML="",t.teardown(),t=null,n&&clearTimeout(n),r(new g.default({message:"Timeout has occurred"}))}function i(e){return new Error('Required parameter "'+e+'" was not supplied')}function u(e,t){return new Error('Invalid value of "'+t+'" for "'+e+'" parameter')}function a(e){var t=Object.assign({},w,e);if(!t.keyId)throw i("keyId");if(!t.container)throw i("container");if(t.encryptionType=t.encryptionType.trim().toLowerCase(),m.encryptionTypes.indexOf(t.encryptionType)<0)throw u("encryptionType",t.encryptionType);if("none"!==t.encryptionType){if(!t.keystore)throw i("keystore");t.keystore=(0,d.default)(t.keystore)}if(t.inputType=t.inputType.trim().toLowerCase(),m.inputTypes.indexOf(t.inputType)<0)throw u("inputType",t.inputType);return"number"!=typeof t.timeout&&(t.timeout=w.timeout),t}function l(e,t){if(!(0,c.isObject)(e))throw new Error("An options object was not supplied");if(!(0,c.isFunction)(t))throw new Error("A setup callback was not supplied");var n=a(e),r=document.querySelector(n.container);if(!r)throw new Error("Container cannot be located.");r.style.overflow="hidden";var i=(0,T.default)(n.keyId)?h.iframe.prod:h.iframe.cas,u=(0,c.resolveOrigin)(i),l=s(i,n.keyId);r.appendChild(l);var f=new y.default(l.contentWindow,u,u),d=n.timeout>0?setTimeout(function(){o(r,f,d,t)},n.timeout):null,p=function(e,s){f.unsubscribeAll(),f.subscribe(m.postMessagesFromChild.HANDSHAKE_COMPLETE,function(){d&&clearTimeout(d),f.unsubscribeAll(),t(null,new b.default(r,l.contentWindow,n.label,f))}),s(n)};f.subscribe(m.postMessagesFromChild.HANDSHAKE_INIT,p)}t.__esModule=!0,t.default=l;var c=n(1),f=n(19),d=r(f),p=n(11),b=r(p),h=n(14),E=n(5),y=r(E),m=n(2),v=n(4),g=r(v),A=n(6),T=r(A);"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var s=arguments[r];if(null!=s)for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},writable:!0,configurable:!0});var w={encryptionType:"rsaoaep256",cardDetection:!0,inputType:"tel",timeout:12e4};e.exports=t.default},,function(e,t,n){"use strict";t.__esModule=!0;var r=n(1);t.default=function(e){var t=void 0;if((0,r.isString)(e))try{t=JSON.parse(e)}catch(e){throw new Error("Could not parse supplied keystore string")}else{if(!(0,r.isObject)(e))throw new Error('Invalid "keystore" supplied');t=e}if(null==t.kid)throw new Error("No kid supplied");return t},e.exports=t.default}])});